<!-- 도감 미니 팝업 (태그 제거 + 스크롤 한 페이지형) -->
<div id="codexModal" class="modal" role="dialog" aria-modal="true" aria-label="도감 선택">
  <div class="sheet" style="width:min(960px,100%);height:min(90vh,800px);display:grid;grid-template-columns:240px 1fr;overflow:hidden;">
    <!-- 좌측 메뉴 -->
    <aside class="sleft" style="background:linear-gradient(180deg,var(--panel),var(--panel2));padding:12px;display:flex;flex-direction:column;gap:10px;overflow:auto">
      <strong style="font-family:'Cinzel',serif">도감</strong>
      <button class="btn outline" data-type="all">전체</button>
      <button class="btn outline" data-type="trait">특성</button>
      <button class="btn outline" data-type="tech">기술</button>
      <button class="btn outline" data-type="magic">마법</button>
      <button class="btn outline" data-type="skill">스킬</button>
      <button class="btn outline" data-type="authority">권능</button>
      <button class="btn outline" data-type="blessing">가호</button>
      <button class="btn outline" data-type="proficiency">숙련도</button>
      <div style="flex:1"></div>
      <button class="btn" id="closePicker">닫기</button>
    </aside>

    <!-- 우측 내용 -->
    <section class="sright" style="display:flex;flex-direction:column;overflow:hidden">
      <div class="srch" style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
        <input id="cxQ" placeholder="검색(이름/등급)" style="flex:1;min-width:200px">
        <select id="cxRank">
          <option value="">등급 전체</option>
          <option>EX</option><option>SSS</option><option>SS</option><option>S+</option><option>S</option>
          <option>A++</option><option>A+</option><option>A</option><option>A-</option>
          <option>B++</option><option>B+</option><option>B</option><option>B-</option>
          <option>C++</option><option>C+</option><option>C</option><option>C-</option>
          <option>D++</option><option>D+</option><option>D</option><option>D-</option>
          <option>F++</option><option>F+</option><option>F</option><option>F-</option>
        </select>
        <select id="cxSort">
          <option value="name">가나다순</option>
          <option value="rankDesc">등급(고→저)</option>
        </select>
      </div>
      <!-- 태그 제거 후 스크롤 리스트 -->
      <div id="cxList" class="listc" style="flex:1;overflow:auto;display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:8px;padding-right:8px"></div>
      <div id="cxSelInfo" style="margin-top:10px;padding:10px;border-top:1px solid rgba(255,255,255,.1);overflow:auto;max-height:200px"></div>
      <div style="display:flex;justify-content:flex-end;gap:8px;padding-top:8px">
        <button id="cxAdd" class="btn">추가</button>
      </div>
    </section>
  </div>
</div>

<style>
  .cardc{background:rgba(255,255,255,.03);border:1px solid rgba(212,175,55,.25);border-radius:10px;overflow:hidden;cursor:pointer;transition:all .2s}
  .cardc:hover{transform:translateY(-2px);background:rgba(212,175,55,.06)}
  .cardc.selected{outline:2px solid var(--gold);box-shadow:0 0 0 3px rgba(212,175,55,.25) inset}
  .cardc .thc{width:100%;aspect-ratio:1/1;background-size:cover;background-position:center;border-bottom:1px solid rgba(255,255,255,.08)}
  .cardc .meta{padding:6px;font-size:.85rem;text-align:center}
</style>
