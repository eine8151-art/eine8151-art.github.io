<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Home Page</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root{--bg:#0f0f12;--panel:#1a1a20;--panel2:#141419;--text:#E8E6E3;--muted:#b7b3ad;--gold:#d4af37;--gold2:#b8922b;--card:rgba(212,175,55,.35)}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;
      background:radial-gradient(1200px 800px at 65% -10%, rgba(212,175,55,.1), transparent 70%),radial-gradient(900px 700px at 10% 20%, rgba(125,106,61,.12), transparent 60%),var(--bg);color:var(--text);font-family:'Noto Sans KR',system-ui,sans-serif;overflow:hidden}

    .app{display:grid;
      grid-template-columns:320px 1fr 380px;
      grid-template-rows:64px 1fr 88px;
      grid-template-areas:"top top top" "left center right" "bottom bottom bottom";
      gap:16px;height:100%;padding:16px;
      position:relative
    }

    .stars{
      position:absolute;
      inset:0;
      background-image:radial-gradient(rgba(255,255,255,.35) 1px, transparent 1px);
      background-size:40px 40px;
      filter:blur(.2px);
      opacity:.3;
      pointer-events:none
    }

    .topbar{
      grid-area:top;
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:10px;
      background:linear-gradient(180deg, rgba(20,20,26,.7), rgba(20,20,26,.15));
      border:1px solid rgba(255,255,255,.05);border-radius:14px;
      padding:10px 14px;
      backdrop-filter:blur(6px)
    }

    .chip{
      display:flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.06);
      cursor:default
    }

    .link{
      cursor:pointer;
      text-decoration:none;
      color:inherit
    }

    .link:hover{
      filter:brightness(1.1)
    }

    .sep{
      width:1px;
      height:24px;
      background:rgba(255,255,255,.08)
    }

    .sidebar{
      grid-area:left;
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(255,255,255,.06);
      border-radius:14px;
      padding:14px;
      overflow:auto
    }

    .profile{
      display:flex;
      gap:12px;
      align-items:center;
      padding:10px;
      border-radius:12px;
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.06)
    }

    .avatar{
      width:46px;
      height:46px;
      border-radius:50%;
      background:linear-gradient(145deg,#3a3a46,#23232a);
      border:2px solid var(--gold2);
      background-size:cover;
      background-position:center;
    }

    .name{
      font-weight:700
    }

    .section-title{
      margin:14px 6px 8px;
      color:var(--muted);
      font-size:.9rem;
      letter-spacing:.06em
    }

    .list{
      display:flex;
      flex-direction:column;
      gap:8px
    }
    .item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:10px 12px;
      border:1px dashed rgba(212,175,55,0.28);
      border-radius:10px;
      background:rgba(255,255,255,.02)
    }

    .stage{
      grid-area:center;
      position:relative;
      overflow:hidden;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.06);
      perspective: 350px;
      transform-style: preserve-3d;
      transition: transform 0.1s;
      background:radial-gradient(600px 300px at 50% 0%, rgba(212,175,55,.18), rgba(20,20,26,.0) 60%), linear-gradient(180deg, var(--panel), var(--panel2))
    }

    .speech{
      position:absolute;
      left:24px;
      bottom:24px;
      padding:12px 14px;
      border-radius:10px;
      color:#111;
      background:linear-gradient(180deg,#fff,#e9e2d4);
      border:1px solid #cfc3a2;
      box-shadow:0 8px 14px rgba(0,0,0,.25);
      font-weight:600;max-width:52ch
    }

    .rep{
      position:absolute;
      right:6%;
      bottom:0;
      width:min(520px,48%);
      filter:drop-shadow(0 40px 60px rgba(0,0,0,.55));
      transform-style: preserve-3d;
      transform-origin: center bottom;
      transition:transform .12s ease-out
    }

    .rep-overlay{
      position:absolute;
      inset:0;
      background:linear-gradient(105deg,
      transparent 40%,
    rgba(255, 219, 112, 0.8) 45%,
    rgba(132, 50, 255 ,0.6) 50%,
      transparent 54%);
      filter:brightness(1.1) opacity(0);
      mix-blend-mode:color-dodge;
      background-size:150% 150%;
      background-position:100%;
      pointer-events:none;
      transition:all 0.1s;
    }

    .right{
      grid-area:right;
      display:grid;
      grid-template-columns:1fr;
      gap:12px
    }

    .card{
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid var(--card);
      border-radius:14px;
      padding:14px;
      cursor:pointer;
      transition:.25s ease
    }

    .card:hover{
      transform:translateY(-2px);
      box-shadow:0 14px 26px rgba(0,0,0,.35)
    }

    .tag{
      display:inline-block;
      font-size:.75rem;
      padding:4px 8px;
      border:1px solid var(--card);
      border-radius:999px;
      color:var(--muted)
    }

    .bottomnav{
      grid-area:bottom;
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:center;
      padding:12px;
      background:linear-gradient(180deg, rgba(26,26,32,.8), rgba(26,26,32,.3));
      border:1px solid rgba(255,255,255,.06);
      border-radius:14px;
      backdrop-filter:blur(6px)
    }

    .navbtn{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      min-width:90px;
      border:1px solid rgba(255,255,255,.06);
      border-radius:12px;
      background:rgba(255,255,255,.02);
      cursor:pointer
    }

    .navbtn i{
      font-size:20px;
      color:var(--gold)
    }

    @media(max-width:1100px){
      .app{grid-template-columns:1fr;
        grid-template-rows:64px auto auto 88px;
        grid-template-areas:"top" "center" "right" "bottom";
        overflow:auto
      }

      body{
        overflow:auto
      }

      .sidebar{
        display:none
      }

      .stage{
        min-height:520px
      }

      .rep{
        width:min(420px,70%);
        right:2%
      }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="stars"></div>

    <div class="topbar">
      <div class="chip"><strong>100G</strong></div>
      <div class="chip"><i class="fa-regular fa-compass"></i> <span id="points">íƒìƒ‰í¬ì¸íŠ¸ 12/12</span></div>
      <div class="sep"></div>
      <!-- âœ¨ ìƒˆë¡œ ì¶”ê°€ëœ ë„ê° ë²„íŠ¼ -->
      <a href="compendium.html" class="chip link" title="ìŠ¤í‚¬Â·íŠ¹ì„± ë„ê°"><i class="fa-regular fa-bookmark"></i> ë„ê°</a>
      <div class="sep"></div>
      <a href="member.html" class="chip link" title="ë‹¨ì› ê´€ë¦¬"><i class="fa-regular fa-user"></i> MEMBER</a>
      <a href="character.html" class="chip link" title="í”„ë¡œí•„"><i class="fa-regular fa-id-card"></i> PROFILE</a>
    </div>

    <aside class="sidebar">
      <!-- ğŸ”§ ì—¬ê¸°: ëŒ€í‘œ ìºë¦­í„° ì •ë³´ë¥¼ ë°˜ì˜í•  ìˆ˜ ìˆë„ë¡ id ì¶”ê°€ -->
      <div class="profile">
        <div class="avatar" id="profileAvatar"></div>
        <div>
          <div class="name" id="profileName">ìºë¦­í„° ì´ë¦„</div>
          <div id="profileSub" style="font-size:.9rem;color:var(--muted)">ì „ì§: ëª¨í—˜ê°€</div>
        </div>
      </div>
      <div class="section-title">ê³µì§€ì‚¬í•­</div>
      <div class="list">
        <div class="item"><span>ìºë¦­í„° ì„¤ì • ì•ˆë‚´</span><small style="color:var(--muted)">08:21</small></div>
        <div class="item"><span>ì‚¬ì´íŠ¸ ì—…ë°ì´íŠ¸ ë¡œê·¸</span><small style="color:var(--muted)">ì–´ì œ</small></div>
      </div>
    </aside>

    <main class="stage" id="stage">
    <!-- âœ¨ ë¹› ë°˜ì‚¬ìš© ì˜¤ë²„ë ˆì´ -->
    <div class="rep-overlay" id="repOverlay"></div>

    <img id="repImg" class="rep" alt="ëŒ€í‘œ ìºë¦­í„°">
    <div class="speech" id="speech">ë‚˜ ë„ˆë¬´ í˜ë“¤ë‹¤ ã… ã…  ì´ê±° ì™œì´ë˜ ì–´ë µëƒ ã… ã… </div>
  </main>

    <section class="right">
      <article class="card" onclick="location.href='member.html'">
        <span class="tag">MEMBER</span>
        <h3>ë‹¨ì› ê´€ë¦¬</h3>
        <p style="margin:0;color:var(--muted)">í”„ë¡œí•„/ì´ë¯¸ì§€/ìŠ¤í‚¬ í¸ì§‘</p>
      </article>
      <article class="card" onclick="location.href='character.html'">
        <span class="tag">PROFILE</span>
        <h3>ìºë¦­í„° í”„ë¡œí•„</h3>
        <p style="margin:0;color:var(--muted)">ëŒ€í‘œ ìºë¦­í„° ìƒì„¸ ë³´ê¸°</p>
      </article>
      <!-- âœ¨ ìƒˆë¡œ ì¶”ê°€ëœ ë„ê° ì¹´ë“œ -->
      <article class="card" onclick="location.href='compendium.html'">
        <span class="tag">COMPENDIUM</span>
        <h3>ë„ê°</h3>
        <p style="margin:0;color:var(--muted)">ìŠ¤í‚¬Â·íŠ¹ì„± ì¼ê´„ ê´€ë¦¬</p>
      </article>
            <article class="card" onclick="location.href='battle.html'">
        <span class="tag">BATTLE</span>
        <h3>í…ìŠ¤íŠ¸ ì „íˆ¬</h3>
        <p style="margin:0;color:var(--muted)">ë“±ë¡ëœ ìºë¦­í„°ë¡œ 1:1 ì „íˆ¬</p>
      </article>
    </section>

    <nav class="bottomnav">
      <button class="navbtn" onclick="location.href='member.html'"><i class="fa-regular fa-user"></i><span>MEMBER</span></button>
      <button class="navbtn" onclick="location.href='character.html'"><i class="fa-regular fa-id-card"></i><span>PROFILE</span></button>
      <button class="navbtn" onclick="location.href='compendium.html'"><i class="fa-regular fa-bookmark"></i><span>ë„ê°</span></button>
      <button class="navbtn" onclick="location.href='battle.html'"><i class="fa-solid fa-swords"></i><span>BATTLE</span></button>

    </nav>
  </div>

  <script>
    // ëŒ€í‘œ ìºë¦­í„° ì´ë¯¸ì§€/í”„ë¡œí•„ ë Œë” + ê°„ë‹¨ íš¨ê³¼
    const STORE='members.v1';
    const REP='representativeId';

    const repImg       = document.getElementById('repImg');
    const stage        = document.getElementById('stage');
    const profileName  = document.getElementById('profileName');
    const profileSub   = document.getElementById('profileSub');
    const profileAvatar= document.getElementById('profileAvatar');

    function loadMembers(){
      const a = localStorage.getItem(STORE);
      const b = localStorage.getItem('memberData.v1'); // êµ¬ë²„ì „ í˜¸í™˜
      try{
        return a ? JSON.parse(a) : (b ? JSON.parse(b) : []);
      }catch{
        return [];
      }
    }
    function chooseRep(){
      const list = loadMembers();
      const id   = localStorage.getItem(REP);
      return list.find(x=>x.id===id) || list[0] || null;
    }

    function render(){
      const rep = chooseRep();

      // ë©”ì¸ ì¤‘ì•™ í° ì´ë¯¸ì§€
      if(rep && rep.img){
        repImg.src = rep.img;
        repImg.style.display = 'block';
      }else{
        repImg.style.display = 'none';
      }

      // ğŸ”§ ì™¼ìª½ ìƒë‹¨ ë¯¸ë‹ˆ í”„ë¡œí•„ ë°˜ì˜
      if(rep){
        if(profileName) profileName.textContent = rep.name || 'ë¬´ëª…';
        if(profileSub){
          // ì„œë¸Œíƒ€ì´í‹€ì´ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ, ì—†ìœ¼ë©´ ì—­í• ì„ ì „ì§ì²˜ëŸ¼ í‘œê¸°
          if(rep.sub && rep.sub.trim()){
            profileSub.textContent = rep.sub;
          }else if(rep.role){
            profileSub.textContent = 'ì „ì§: ' + rep.role;
          }else{
            profileSub.textContent = 'ì „ì§: -';
          }
        }
        if(profileAvatar){
          if(rep.img){
            profileAvatar.style.backgroundImage = `url('${rep.img}')`;
          }else{
            // ì´ë¯¸ì§€ ì—†ìœ¼ë©´ ê¸°ë³¸ ê·¸ë¼ë””ì–¸íŠ¸ë§Œ
            profileAvatar.style.backgroundImage = '';
          }
        }
      }else{
        // ëŒ€í‘œ ìºë¦­í„°ê°€ ì „í˜€ ì—†ì„ ë•Œ ê¸°ë³¸ê°’
        if(profileName) profileName.textContent = 'ìºë¦­í„° ì—†ìŒ';
        if(profileSub)  profileSub.textContent  = 'ë‹¨ì› ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ìºë¦­í„°ë¥¼ ìƒì„±í•˜ì„¸ìš”';
        if(profileAvatar) profileAvatar.style.backgroundImage = '';
      }
    }
    stage.addEventListener('mousemove', e=>{
      const r = stage.getBoundingClientRect();
      const x = (e.clientX - r.left) / r.width;   // 0 ~ 1
      const y = (e.clientY - r.top)  / r.height;  // 0 ~ 1

  // í™”ë©´ ì¤‘ì‹¬ ê¸°ì¤€ìœ¼ë¡œ -0.5 ~ +0.5
      const offsetX = x - 0.5;
      const offsetY = y - 0.5;

  // ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì— ë”°ë¼ ì‚´ì§ ì´ë™
      const moveX = offsetX * 18;  // px
      const moveY = offsetY * 10;  // px

  // ê¸°ìš¸ê¸° ê°ë„ ê³„ì‚° (ê°’ì€ ì·¨í–¥ëŒ€ë¡œ ì¡°ì ˆ ê°€ëŠ¥)
      const rotateY = offsetX * 18;      // ì¢Œìš° ê¸°ìš¸ê¸° (yì¶• íšŒì „)
      const rotateX = -offsetY * 12;     // ìƒí•˜ ê¸°ìš¸ê¸° (xì¶• íšŒì „, ìœ„ë¡œ ê°ˆìˆ˜ë¡ ë’¤ë¡œ ì –í˜€ì§€ê²Œ -)

  // ì•½ê°„ì˜ zì¶• íŠ€ì–´ë‚˜ì˜´
      const translateZ = 18; // px

      repImg.style.transform =
        `translate3d(${moveX}px, ${moveY}px, ${translateZ}px) ` +
        `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
});

    stage.addEventListener('mouseleave', ()=>{
      // ì¤‘ì•™ ì›ìœ„ì¹˜ + ê¸°ìš¸ê¸° ë¦¬ì…‹
      repImg.style.transform = 'translate3d(0,0,0) rotateX(0deg) rotateY(0deg)';
    });

    render();
  </script>
</body>
</html>
